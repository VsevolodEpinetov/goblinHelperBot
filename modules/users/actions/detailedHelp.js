const { Composer, Markup } = require("telegraf");
const util = require('../../util');
const { getUser } = require('../../db/helpers');

module.exports = Composer.action('detailedHelp', async (ctx) => {
  const userData = await getUser(ctx.callbackQuery.from.id);
  if (!userData) return;

  const detailedHelpMessage = `üìö <b>–ü–û–î–†–û–ë–ù–ê–Ø –°–ü–†–ê–í–ö–ê</b>\n\n` +
    `üéØ <b>–°–¢–ê–¢–£–° –ê–ö–ö–ê–£–ù–¢–ê:</b>\n` +
    `‚Ä¢ <b>–¢–µ–∫—É—â–∏–π –º–µ—Å—è—Ü</b> - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–ø–ª–∞—á–µ–Ω –ª–∏ —Ç–µ–∫—É—â–∏–π –ø–µ—Ä–∏–æ–¥\n` +
    `‚Ä¢ <b>–ë–∞–ª–∞–Ω—Å</b> - –≤–∞—à–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞ –¥–ª—è –ø–æ–∫—É–ø–æ–∫\n` +
    `‚Ä¢ <b>–ë–∏–ª–µ—Ç–∏–∫–∏</b> - –±–æ–Ω—É—Å—ã –∑–∞ –ø–æ–∫—É–ø–∫—É ‚ûï –ø–æ–¥–ø–∏—Å–æ–∫\n\n` +
    `üí≥ <b>–ü–õ–ê–¢–ï–ñ–ò:</b>\n` +
    `‚Ä¢ <b>–û–ø–ª–∞—Ç–∏—Ç—å –º–µ—Å—è—Ü</b> - –ø–æ–∫—É–ø–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–µ–∫—É—â–µ–º—É –º–µ—Å—è—Ü—É\n` +
    `‚Ä¢ <b>–î–æ–±–∞–≤–∏—Ç—å ‚ûï</b> - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø —Å –±–æ–Ω—É—Å–∞–º–∏\n` +
    `‚Ä¢ <b>–ë–∞–ª–∞–Ω—Å</b> - –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—á–µ—Ç–∞\n\n` +
    `üöÄ <b>–ö–ò–ö–°–¢–ê–†–¢–ï–†–´:</b>\n` +
    `‚Ä¢ –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤\n` +
    `‚Ä¢ –ü–æ–∫—É–ø–∫–∞ —á–µ—Ä–µ–∑ –±–∏–ª–µ—Ç–∏–∫–∏\n` +
    `‚Ä¢ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤\n\n` +
    `üìÖ <b>–ü–û–î–ü–ò–°–ö–ò:</b>\n` +
    `‚Ä¢ –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∫—É–ø–æ–∫\n` +
    `‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏\n` +
    `‚Ä¢ –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±—É–¥—É—â–∏—Ö –º–µ—Å—è—Ü–µ–≤\n\n` +
    `üéÅ <b>–ë–û–ù–£–°–´:</b>\n` +
    `‚Ä¢ –ë–∏–ª–µ—Ç–∏–∫–∏ –∑–∞ ‚ûï –ø–æ–¥–ø–∏—Å–∫–∏\n` +
    `‚Ä¢ –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è\n` +
    `‚Ä¢ –†–∞–Ω–Ω–∏–π –¥–æ—Å—Ç—É–ø –∫ —Ä–µ–ª–∏–∑–∞–º`;

  const helpKeyboard = [
    [Markup.button.callback('üîô –ö –∫—Ä–∞—Ç–∫–æ–π —Å–ø—Ä–∞–≤–∫–µ', 'userHelp')],
    [Markup.button.callback('üè† –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é', 'userMenu')]
  ];

  await ctx.editMessageText(detailedHelpMessage, {
    parse_mode: 'HTML',
    ...Markup.inlineKeyboard(helpKeyboard)
  });
});
